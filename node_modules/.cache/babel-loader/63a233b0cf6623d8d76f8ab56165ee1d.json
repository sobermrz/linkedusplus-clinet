{"ast":null,"code":"import _toConsumableArray from\"/Users/andrew/Documents/NEU/CSYE7220-DevOps/hw/linkedUsPlus/linkedUsPlus-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/andrew/Documents/NEU/CSYE7220-DevOps/hw/linkedUsPlus/linkedUsPlus-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{UPDATE_MESSAGE,CONNECT_WEBSOCKET,DISCONNECT_WEBSOCKET,SET_TALKER,UPDATE_ALL_MSG_DATA}from'../actions/types';var initialState={socket:null,nowTalkingTo:null,msgData:[],allMsgData:new Map(),friend:null,loading:true};export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;switch(type){// TO DO: 從資料庫取得聊天紀錄後，更新allMsgData state\ncase CONNECT_WEBSOCKET:return _objectSpread(_objectSpread({},state),{},{socket:payload,loading:false});case UPDATE_MESSAGE://const {from} = payload;\nreturn _objectSpread(_objectSpread({},state),{},{msgData:[].concat(_toConsumableArray(state.msgData),[payload]),loading:false});case UPDATE_ALL_MSG_DATA:return _objectSpread(_objectSpread({},state),{},{allMsgData:payload});case SET_TALKER:return _objectSpread(_objectSpread({},state),{},{msgData:payload.msgData,nowTalkingTo:payload.userId});case DISCONNECT_WEBSOCKET:return{socket:null,nowTalkingTo:null,msgData:[],allMsgData:new Map(),friend:null,loading:true};default:return state;}}","map":{"version":3,"sources":["/Users/andrew/Documents/NEU/CSYE7220-DevOps/hw/linkedUsPlus/linkedUsPlus-client/src/reducers/chat.js"],"names":["UPDATE_MESSAGE","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","SET_TALKER","UPDATE_ALL_MSG_DATA","initialState","socket","nowTalkingTo","msgData","allMsgData","Map","friend","loading","state","action","type","payload","userId"],"mappings":"mZAAA,OACEA,cADF,CAEEC,iBAFF,CAGEC,oBAHF,CAIEC,UAJF,CAKEC,mBALF,KAMO,kBANP,CAQA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,MAAM,CAAE,IADW,CAEnBC,YAAY,CAAE,IAFK,CAGnBC,OAAO,CAAE,EAHU,CAInBC,UAAU,CAAE,GAAIC,CAAAA,GAAJ,EAJO,CAKnBC,MAAM,CAAE,IALW,CAMnBC,OAAO,CAAE,IANU,CAArB,CASA,cAAe,WAAwC,IAA9BC,CAAAA,KAA8B,2DAAtBR,YAAsB,IAARS,CAAAA,MAAQ,8CAC7CC,CAAAA,IAD6C,CAC3BD,MAD2B,CAC7CC,IAD6C,CACvCC,OADuC,CAC3BF,MAD2B,CACvCE,OADuC,CAErD,OAAQD,IAAR,EACE;AACA,IAAKd,CAAAA,iBAAL,CACE,sCACKY,KADL,MAEEP,MAAM,CAAEU,OAFV,CAGEJ,OAAO,CAAE,KAHX,GAKF,IAAKZ,CAAAA,cAAL,CACE;AACA,sCACKa,KADL,MAEEL,OAAO,8BAAMK,KAAK,CAACL,OAAZ,GAAqBQ,OAArB,EAFT,CAGEJ,OAAO,CAAE,KAHX,GAKF,IAAKR,CAAAA,mBAAL,CACE,sCACKS,KADL,MAEEJ,UAAU,CAAEO,OAFd,GAIF,IAAKb,CAAAA,UAAL,CACE,sCACKU,KADL,MAEEL,OAAO,CAAEQ,OAAO,CAACR,OAFnB,CAGED,YAAY,CAAES,OAAO,CAACC,MAHxB,GAMF,IAAKf,CAAAA,oBAAL,CACE,MAAO,CACLI,MAAM,CAAE,IADH,CAELC,YAAY,CAAE,IAFT,CAGLC,OAAO,CAAE,EAHJ,CAILC,UAAU,CAAE,GAAIC,CAAAA,GAAJ,EAJP,CAKLC,MAAM,CAAE,IALH,CAMLC,OAAO,CAAE,IANJ,CAAP,CAQF,QACE,MAAOC,CAAAA,KAAP,CArCJ,CAuCD","sourcesContent":["import {\n  UPDATE_MESSAGE,\n  CONNECT_WEBSOCKET,\n  DISCONNECT_WEBSOCKET,\n  SET_TALKER,\n  UPDATE_ALL_MSG_DATA,\n} from '../actions/types';\n\nconst initialState = {\n  socket: null,\n  nowTalkingTo: null,\n  msgData: [],\n  allMsgData: new Map(),\n  friend: null,\n  loading: true,\n};\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n  switch (type) {\n    // TO DO: 從資料庫取得聊天紀錄後，更新allMsgData state\n    case CONNECT_WEBSOCKET:\n      return {\n        ...state,\n        socket: payload,\n        loading: false,\n      };\n    case UPDATE_MESSAGE:\n      //const {from} = payload;\n      return {\n        ...state,\n        msgData: [...state.msgData, payload],\n        loading: false,\n      };\n    case UPDATE_ALL_MSG_DATA:\n      return {\n        ...state,\n        allMsgData: payload,\n      };\n    case SET_TALKER:\n      return {\n        ...state,\n        msgData: payload.msgData,\n        nowTalkingTo: payload.userId,\n      };\n\n    case DISCONNECT_WEBSOCKET:\n      return {\n        socket: null,\n        nowTalkingTo: null,\n        msgData: [],\n        allMsgData: new Map(),\n        friend: null,\n        loading: true,\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}