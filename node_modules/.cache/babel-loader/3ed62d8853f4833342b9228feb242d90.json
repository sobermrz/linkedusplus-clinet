{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrew/mern-workspace/linkedUs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/andrew/mern-workspace/linkedUs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{setAlert}from'./alert';import{GET_PROFILE,GET_PROFILES,GET_REPOS,PROFILE_ERROR,UPDATE_PROFILE,CLEAR_PROFILE,ACCOUNT_DELETED,GET_FRIENDS_PROFILES}from'./types';// Get current users profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/profile/me');case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Get all profiles\nexport var getProfiles=function getProfiles(isAuthenticated){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Prevent flashing of the past user's profile\ndispatch({type:CLEAR_PROFILE});_context2.prev=1;if(!isAuthenticated){_context2.next=8;break;}_context2.next=5;return axios.get('/api/profile/unfriend');case 5:res=_context2.sent;_context2.next=11;break;case 8:_context2.next=10;return axios.get('/api/profile');case 10:res=_context2.sent;case 11:dispatch({type:GET_PROFILES,payload:res.data});_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[1,14]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Get all friends profiles\nexport var getFriendsProfiles=function getFriendsProfiles(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// Prevent flashing of the past user's profile\ndispatch({type:CLEAR_PROFILE});_context3.prev=1;_context3.next=4;return axios.get('/api/profile/friend');case 4:res=_context3.sent;dispatch({type:GET_FRIENDS_PROFILES,payload:res.data});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Get all nonfriends profiles\nexport var getNonFriendsProfiles=function getNonFriendsProfiles(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Prevent flashing of the past user's profile\ndispatch({type:CLEAR_PROFILE});_context4.prev=1;_context4.next=4;return axios.get('/api/profile/unfriend');case 4:res=_context4.sent;dispatch({type:GET_PROFILES,payload:res.data});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// Get profile by ID\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(\"/api/profile/user/\".concat(userId));case 3:res=_context5.sent;dispatch({type:GET_PROFILE,payload:res.data});_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};// Get GitHub repos\nexport var getGithubRepos=function getGithubRepos(username){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.get(\"/api/profile/github/\".concat(username));case 3:res=_context6.sent;dispatch({type:GET_REPOS,payload:res.data});_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};// Create or update profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log('start create profile');_context7.prev=1;config={headers:{'Content-Type':'application/json'}};_context7.next=5;return axios.post('/api/profile',formData,config);case 5:res=_context7.sent;console.log('success!!');dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?'Profile Updated':'Profile Created','success'));if(!edit){history.push('/dashboard');//轉發到/dashboard\n}_context7.next=18;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](1);errors=_context7.t0.response.data.errors;console.log('err: ',errors);if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 18:case\"end\":return _context7.stop();}}},_callee7,null,[[1,12]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};// Add Experience\nexport var addExperience=function addExperience(formData,history){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;config={headers:{'Content-Type':'application/json'}};_context8.next=4;return axios.put('/api/profile/experience',formData,config);case 4:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experience Added','success'));history.push('/dashboard');//轉發到/dashboard\n_context8.next=15;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](0);errors=_context8.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 15:case\"end\":return _context8.stop();}}},_callee8,null,[[0,10]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};// Add Education\nexport var addEducation=function addEducation(formData,history){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;config={headers:{'Content-Type':'application/json'}};_context9.next=4;return axios.put('/api/profile/education',formData,config);case 4:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education Added','success'));history.push('/dashboard');//轉發到/dashboard\n_context9.next=15;break;case 10:_context9.prev=10;_context9.t0=_context9[\"catch\"](0);errors=_context9.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context9.t0.response.statusText,status:_context9.t0.response.status}});case 15:case\"end\":return _context9.stop();}}},_callee9,null,[[0,10]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};// Delete experience\nexport var deleteExperience=function deleteExperience(id){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){var res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return axios.delete(\"/api/profile/experience/\".concat(id));case 3:res=_context10.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experience Removed','success'));_context10.next=11;break;case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context10.t0.response.statusText,status:_context10.t0.response.status}});case 11:case\"end\":return _context10.stop();}}},_callee10,null,[[0,8]]);}));return function(_x10){return _ref10.apply(this,arguments);};}();};// Delete education\nexport var deleteEducation=function deleteEducation(id){return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(dispatch){var res;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return axios.delete(\"/api/profile/education/\".concat(id));case 3:res=_context11.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education Removed','success'));_context11.next=11;break;case 8:_context11.prev=8;_context11.t0=_context11[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context11.t0.response.statusText,status:_context11.t0.response.status}});case 11:case\"end\":return _context11.stop();}}},_callee11,null,[[0,8]]);}));return function(_x11){return _ref11.apply(this,arguments);};}();};// Delete account & profile\nexport var deleteAccount=function deleteAccount(){return/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(dispatch){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(!window.confirm('Are you sure? This can NOT be undone!')){_context12.next=12;break;}_context12.prev=1;_context12.next=4;return axios.delete('/api/profile');case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert('Your account has been permanently deleted'));_context12.next=12;break;case 9:_context12.prev=9;_context12.t0=_context12[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context12.t0.response.statusText,status:_context12.t0.response.status}});case 12:case\"end\":return _context12.stop();}}},_callee12,null,[[1,9]]);}));return function(_x12){return _ref12.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/andrew/mern-workspace/linkedUs/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","GET_PROFILES","GET_REPOS","PROFILE_ERROR","UPDATE_PROFILE","CLEAR_PROFILE","ACCOUNT_DELETED","GET_FRIENDS_PROFILES","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfiles","isAuthenticated","getFriendsProfiles","getNonFriendsProfiles","getProfileById","userId","getGithubRepos","username","createProfile","formData","history","edit","console","log","config","headers","post","push","errors","forEach","error","addExperience","put","addEducation","deleteExperience","id","delete","deleteEducation","deleteAccount","window","confirm"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { setAlert } from './alert';\n\nimport {\n  GET_PROFILE,\n  GET_PROFILES,\n  GET_REPOS,\n  PROFILE_ERROR,\n  UPDATE_PROFILE,\n  CLEAR_PROFILE,\n  ACCOUNT_DELETED,\n  GET_FRIENDS_PROFILES,\n} from './types';\n\n// Get current users profile\nexport const getCurrentProfile = () => async (dispatch) => {\n  try {\n    const res = await axios.get('/api/profile/me');\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Get all profiles\nexport const getProfiles = (isAuthenticated) => async (dispatch) => {\n  // Prevent flashing of the past user's profile\n  dispatch({ type: CLEAR_PROFILE });\n\n  try {\n    let res;\n    if (isAuthenticated) {\n      res = await axios.get('/api/profile/unfriend');\n    } else {\n      res = await axios.get('/api/profile');\n    }\n\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Get all friends profiles\nexport const getFriendsProfiles = () => async (dispatch) => {\n  // Prevent flashing of the past user's profile\n  dispatch({ type: CLEAR_PROFILE });\n\n  try {\n    const res = await axios.get('/api/profile/friend');\n\n    dispatch({\n      type: GET_FRIENDS_PROFILES,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Get all nonfriends profiles\nexport const getNonFriendsProfiles = () => async (dispatch) => {\n  // Prevent flashing of the past user's profile\n  dispatch({ type: CLEAR_PROFILE });\n\n  try {\n    const res = await axios.get('/api/profile/unfriend');\n\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Get profile by ID\nexport const getProfileById = (userId) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/profile/user/${userId}`);\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Get GitHub repos\nexport const getGithubRepos = (username) => async (dispatch) => {\n  try {\n    const res = await axios.get(`/api/profile/github/${username}`);\n\n    dispatch({\n      type: GET_REPOS,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Create or update profile\nexport const createProfile = (formData, history, edit = false) => async (\n  dispatch\n) => {\n  console.log('start create profile');\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    const res = await axios.post('/api/profile', formData, config);\n    console.log('success!!');\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'));\n\n    if (!edit) {\n      history.push('/dashboard'); //轉發到/dashboard\n    }\n  } catch (err) {\n    const errors = err.response.data.errors;\n    console.log('err: ', errors);\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Add Experience\nexport const addExperience = (formData, history) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    const res = await axios.put('/api/profile/experience', formData, config);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Experience Added', 'success'));\n\n    history.push('/dashboard'); //轉發到/dashboard\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Add Education\nexport const addEducation = (formData, history) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n\n    const res = await axios.put('/api/profile/education', formData, config);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Education Added', 'success'));\n\n    history.push('/dashboard'); //轉發到/dashboard\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Delete experience\nexport const deleteExperience = (id) => async (dispatch) => {\n  try {\n    const res = await axios.delete(`/api/profile/experience/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Experience Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Delete education\nexport const deleteEducation = (id) => async (dispatch) => {\n  try {\n    const res = await axios.delete(`/api/profile/education/${id}`);\n\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data,\n    });\n\n    dispatch(setAlert('Education Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status },\n    });\n  }\n};\n\n// Delete account & profile\nexport const deleteAccount = () => async (dispatch) => {\n  if (window.confirm('Are you sure? This can NOT be undone!')) {\n    try {\n      await axios.delete('/api/profile');\n\n      dispatch({ type: CLEAR_PROFILE });\n      dispatch({ type: ACCOUNT_DELETED });\n\n      dispatch(setAlert('Your account has been permanently deleted'));\n    } catch (err) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: { msg: err.response.statusText, status: err.response.status },\n      });\n    }\n  }\n};\n"]},"metadata":{},"sourceType":"module"}